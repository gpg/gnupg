Tue Dec 29 14:41:47 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* misc.c (disable_core_dumps): Check for EINVAL (Atari)

	* getkey (merge_one_pk_and_selfsig): Fixed search of expiredate.
	(merge_keys_and_selfsig): Ditto.

	* free-packet.c (cmp_public_keys): cmp expire only for v3 packets
	(cmp_secret_keys): Ditto.
	(cmp_public_secret_key): Ditto.

Wed Dec 23 17:12:24 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* armor.c (find_header): Reset not_dashed at every header

Wed Dec 23 13:18:14 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* pkclist.c (add_ownertrust): Refresh validity values.

	* trustdb.c (enum_cert_paths_print): New arg refresh.

	* ringedit.c: Fixed problems fix keyrings
	* parse-packet.c (dbg_parse_packet): New debug functions.

	* getkey.c (getkey_disable_caches): New.
	* import.c (import_keys): Disable caches.

Thu Dec 17 18:31:15 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* misc.c (trap_unaligned): Only for glibc 1

	* sign.c (write_dash_escaped): Now escapes "From " lines
	* g10.c: New option --escape-from-lines

	* trustdb.c (sort_tsl_list): New
	(list_trust_path): Now prints sorted list.
	(enum_cert_paths): Likewise.
	(enum_cert_paths_print): New.
	(print_paths): New printing format.
	* pkclist.c (add_ownertrust): New arg quit.
	(edit_ownertrust): New quit selection and does not query
	the recipients ownertrust anymore.
	(add_ownertrust): Print the ceritficate path.


Mon Dec 14 21:18:49 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* parse-packet.c (parse_signature): Now checks for critical bit
	(parse_sig_subpkt): Splitted.
	(parse_one_sig_subpkt): New.
	* sig-check.c (do_check): handle critical bit.

Sun Dec 13 14:10:56 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* pcklist.c (select_algo_from_prefs): Preferences should
	now work (lost the != ? )

Thu Dec 10 20:15:36 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* ringedit.c (gdbm_store): Fix for inserts

	* g10.c (main): New option --export-all
	* export.c (export_pubkeys): New arg.
	(do_export): Now may skip old keys.

	* status.c: Minor patches for Sun's cc

	* keygen.c (ask_algo): Disabled v3 ElGamal choice, rearranged
	 the numbers.  Add a warning question when a sign+encrypt key
	 is selected.

	* g10.c (do_not_use_RSA): Removed.
	* misc.c (print_pubkey_algo_note): New as replacement for the
	do_not_use_RSA() and chnaged all callers.
	(print_cipher_algo_note): New.
	(print_hash_algo_note): New.

	* cipher.c (write_header): Add a call to print_cipher_algo_note.
	* seckey-cert.c (protect_secret_key): Ditto
	* sign.c (do_sign): Add a call to print_digest_algo_note.

	* getkey.c (get_long_user_id_string): New.
	* mainproc.c (check_sig_and_print): Changed the format of the
	status output.

	* encrypt.c (write_pubkey_enc_from_list): print used symmetric cipher.

	* pkclist.c (do_we_trust): Changed a message.

Wed Dec  9 13:41:06 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* misc.c (trap_unaligned) [ALPHA]: Only if UAC_SIGBUS is defined.

	* sign.c (write_dash_escaped): Add the forgotten patch by Brian Moore.

	* compress.c (do_uncompress): Fixed the inflating bug.


Tue Dec  8 13:15:16 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* trustdb.c (upd_uid_record): Now uses the newest self-signature
	(insert_trust_record): Now calls update with recheck set to true.
	(register_trusted_key): New.
	(verify_own_keys): Enhanced by list of trusted keys.

	* g10.c (main): Print a warning when a devel version is used.
	(main): New option --trusted-key

	* import.c (merge_blocks): Fixed merging of new user ids and
	added merging of subkeys.
	(append_uid): Ditto.
	(merge_keysig): New.
	(append_key): New.
	* getkey.c (merge_one_pk_and_selfsig): Get the expiration time
	from the newest self-signature.
	(merge_keys_and_selfsig): Ditto.

	* free-packet.c (cmp_secret_key): New.


Fri Nov 27 21:37:41 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	* g10.c: New option --lock-once
	* tdbio.c (open_db): Add an atexit
	(cleanup): New.
	(tdbio_sync): Add locking.
	(tdbio_end_transaction): Ditto.
	(put_record_into_cache): Ditto.
	* ringedit.c (keyring_copy): Ditto.
	(cleanup): New.
	(add_keyblock_resource): Add an atexit.

Fri Nov 27 15:30:24 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>

	 * armor.c (find_header): Another fix for clearsigs.

Fri Nov 27 12:39:29 CET 1998  Werner Koch  <wk@isil.d.shuttle.de>


	* status.c (display_help): Removed.
	* helptext.c: New and removed the N_() from all cpr_gets.


Fri Nov 20 16:54:52 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): New option --not-dash-escaped
	* sign.c (write_dashed_escaped): Ditto.
	* armor.c (find_header): Support for NotDashEscaped header.

	* getkey.c: print "disabled cache.." only if verbose is used.

Thu Nov 19 07:17:31 1998  Werner Koch  <werner.koch@guug.de>

	* parse-packet.c (dump_sig_subpkt): Fixed expire listing
	* getkey.c (merge_keys_and_selfsig): Fixed expire calculation.
	(merge_one_pk_and_selfsig): Ditto.
	* keyedit.c (menu_expire). Ditto.
	* keygen.c (keygen_add_key_expire): Ditto.
	(ask_expire_interval): New and changed all local function to use
	this instead.
	(keygen_add_key_expire): Opaque should now be a public key;
	changed all callers.

	* parse.packet.c (parse): use skip_rest to skip packets.

	* keyedit.c (keyedit_menu): New arg for cmdline cmds.

Wed Nov 18 20:33:50 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (check_trustdb): Now rechecks all gived userids.
	(collect_paths): Some fixes.
	(upd_pref_records): Skips empty items, evaluate all items.

	* parse-packet.c (dump_sig_subpkt): Better listing of prefs.
	(skip_packet): Now knows about marker packet

	* g10.c: removed cmd "--edit-sig".

	* pubring.asc: Updated.

Sat Nov 14 14:01:29 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Changed syntax of --list-trust-path
	* trustdb.c (list_trust_path): Replaced max_depth by
	opt.max_cert_depth

Fri Nov 13 07:39:58 1998  Werner Koch  <werner.koch@guug.de>

	* trustdb.c (collect_paths): Removed a warning message.
	(enum_trust_web): Removed.
	(enum_cert_paths): New.
	* pkclist.c (add_ownertrust): Changed to use enum_cert_paths.
	(edit_ownertrust): Now list ceritficates on request.
	(show_paths): New.

Wed Nov 11 18:05:44 1998  Werner Koch  <werner.koch@guug.de>

	* g10.c (main): New option --max-cert-depth
	* tdbio.h: add new fields to ver and dir record.
	* tdbio.c: read/write/dump of these fields.
	(tdbio_db_matches_options): New.
	* trustdb.c: replaced MAC_CERT_DEPTH by opt.max_cert_depth.
	(do_check): cache validity and changed other functions
	to reset the cached value.

	* keylist.c (list_one): Now lists the ownertrust.
	* mainproc.c (list_node): Ditto.

Tue Nov 10 10:08:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (g10_exit): Now looks at the new g10_errors_seen.
	* mainproc.c (check_sig_and_print): Sets g10_errors_seen.

	* *.c : i18n many more strings.

	* ringedit.c (locate_keyblock_by_keyid): Add HAVE_LIBGDBM
	(locate_keyblock_by_fpr): Ditto.

	* g10.c (main): removed unsused "int errors".
	(main): Add new option --charset.

	* g10.c (main): special message for the unix newbie.

Mon Nov  9 07:17:42 1998  Werner Koch  <werner.koch@guug.de>

	* getkey.c (finish_lookup): Kludge to prefere algo 16.

	* trustdb.c (new_lid_table): Clear cached item.

	* status.c (cpr_get_utf8): New.
	* pkclist.c (build_pk_list): Uses this.

Sun Nov  8 17:20:39 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c (check_sig_and_print): Why did I use strlen()-1
	in the printf? - This truncated the TZ.

Sat Nov  7 15:57:28 1998  me,,,  (wk@tobold)

	* getkey.c (lookup): Changes to support a read_next.
	(get_pubkey): Fixed a memory leak.

	* keylist.c (list_one): Now lists all matching user IDs.

Tue Nov  3 16:19:21 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (ask_user_id): Now converted to UTF-8

	* g10.c (main): Kludge for pgp clearsigs and textmode.

Fri Oct 30 16:40:39 1998  me,,,  (wk@tobold)

	* signal.c (block_all_signals): New.
	(unblock_all_signals): New
	* tdbio.c (tdbio_end_transaction): Now blocks all signals.

	* trustdb.c (new_lid_table): Changed the representation of the
	former local_lid_info stuff.

	* trustdb.c (update_trust_record): Reorganized the whole thing.
	* sig-check.c (check_key_signature): Now handles class 0x28


Wed Oct 28 18:56:33 1998  me,,,  (wk@tobold)

	* export.c (do_export): Takes care of the exportable sig flag.

Tue Oct 27 14:53:04 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (update_trust_record): New "fast" parameter.

Sun Oct 25 19:32:05 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* openfile.c (copy_options_File): New.
	* ringedit.c (add_keyblock_resource): Creates options file
	* tdbio.c (tdbio_set_dbname): Ditto.

Sat Oct 24 14:10:53 1998  brian moore <bem@cmc.net>

	* mainproc.c (proc_pubkey_enc): Don't release the DEK
	(do_proc_packets): Ditto.

Fri Oct 23 06:49:38 1998  me,,,  (wk@tobold)

	* keyedit.c (keyedit_menu): Comments are now allowed

	* trustdb.c: Rewrote large parts.


Thu Oct 22 15:56:45 1998  Michael Roth	(mroth@nessie.de)

	* encode.c: (encode_simple): Only the plain filename without
	a given directory is stored in generated packets.
	(encode_crypt): Ditto.

	* sign.c: (sign_file) Ditto.


Thu Oct 22 10:53:41 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (update_trust_record): Add new optional arg.

	* import.c (import_keys): Add statistics output
	* trustdb.c (update_trustdb): Ditto.
	(insert_trustdb): Ditto.

	* tdbio.c (tdbio_begin_transaction): New.
	(tdbio_end_transaction): New.
	(tdbio_cancel_transaction): New.

	* g10.c (main): New option --quit.

	* trustdb.c (check_hint_sig): No tests for user-id w/o sig.
	This caused an assert while checking the sigs.

	* trustdb.c (upd_sig_record): Splitted into several functions.

	* import.c (import_keys): New arg "fast".
	* g10.c (main): New command --fast-import.

Wed Oct 21 18:19:36 1998  Michael Roth <mroth@nessie.de>

	* ringedit.c (add_keyblock_resource): Directory is now created.
	* tdbio.c (tdbio_set_dbname): New info message.

Wed Oct 21 11:52:04 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (update_trustdb): released keyblock in loop.

	* keylist.c (list_block): New.
	(list_all): Changed to use list_block.

	* trustdb.c: Completed support for GDBM

	* sign.c (only_old_style): Changed the way force_v3 is handled
	(sign_file): Ditto.
	(clearsign_file): Ditto.

	* keygen.c (has_invalid_email_chars): Splitted into mailbox and
	host part.

	* keylist.c (list_one): Add a merge_keys_and_selfsig.
	* mainproc.c (proc_tree): Ditto.

Sun Oct 18 11:49:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sign.c (only_old_style): Add option force_v3_sigs
	(sign_file): Fixed a bug in sig->version
	(clearsign_file): Ditto.

	* parse-packet.c (dump_sig_subpkt): New

	* keyedit.c (menu_expire): New.
	* free-packet.c (cmp_signatures): New


Sat Oct 17 10:22:39 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c: changed output line length from 72 to 64.

	* keyedit.c (fix_keyblock): New.

Fri Oct 16 10:24:47 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c: Rewrote most.
	* tdbio.c: Add cache and generalized hash tables.

	* options.h (ENABLE_COMMENT_PACKETS): New but undef'ed.
	* encode.c, sign.c, keygen.c: Disabled comment packets.
	* export.c (do_export): Comment packets are never exported,
	except for those in the secret keyring.

	* g10.c (main): Removed option do-no-export-rsa; should be
	be replaced by a secpial tool.
	* export.c (do_export): Removed the code for the above option.

	* armor.c (find_header): Support for new only_keyblocks.
	* import.c (import_keys): Only looks for keyblock armors.

	* packet.h: replaced valid_days by expiredate and changed all users.
	* build-packet.c (do_public_key): calculates valid-days
	(do_secret_key): Ditto.
	* parse-packet.c (parse_key): expiredate is calucated from the
	valid_period in v3 packets.
	* keyid.c (do_fingerprint_md): calculates valid_dates.

	* keygen.c (add_key_expire): fixed key expiration time for v4 packets.

	* armor.c (find_header): A LF in the first 28 bytes
	was skipped for non-armored data.

Thu Oct  8 11:35:51 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (is_armored): Add test on old comment packets.

	* tdbio.c (tdbio_search_dir_bypk): fixed memory leak.

	* getkey.c: Changed the caching algorithms.

Wed Oct  7 19:33:28 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* kbnodes.c (unused_nodes): New.

Wed Oct  7 11:15:36 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keyedit.c (sign_uids): Fixed a problem with SK which could caused
	a save of an unprotected key.
	(menu_adduid): Ditto.

	* keyedit.c (keyedit_menu): Prefs are now correctly listed for
	new user ids.

	* trustdb.c (update_trust_record): New.
	(insert_trust_record): Now makes use of update_trust_record.

Tue Oct  6 16:18:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (read_record): replaces most of the tdbio_read_records.
	(write_record): Ditto.

Sat Oct  3 11:01:21 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (ask_alogo): enable ElGamal enc-only only for addmode.

Wed Sep 30 10:15:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* import.c (import_one): Fixed update of wrong keyblock.

Tue Sep 29 08:32:08 1998  me,,,  (wk@tobold)

	* mainproc.c (proc_plaintext): Display note for special filename.
	* plaintext.c (handle_plaintext): Suppress output of special file.

Mon Sep 28 12:57:12 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (verify_own_keys): Add warning if a key is not protected.

	* passphrase (hash_passphrase): Fixed iterated+salted mode and
	setup for keysizes > hashsize.

	* g10.c (main): New options: --s2k-{cipher,digest,mode}.

Fri Sep 25 09:34:23 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c: Chnaged some help texts.

Tue Sep 22 19:34:39 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* passphrase.c (read_passphrase_from_fd): fixed bug for long
	passphrases.

Mon Sep 21 11:28:05 1998  Werner Koch  (wk@(none))

	* getkey.c (lookup): Add code to use the sub key if the primary one
	does not match the usage.

	* armor.c (armor_filter): New error message: no valid data found.
	(radix64_read): Changes to support multiple messages.
	(i18n.h): New.
	* mainproc.c (add_onepass_sig): bug fix.

Mon Sep 21 08:03:16 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* pkclist.c (do_we_trust): Add keyid to most messages.

	* passphrase.c (read_passphrase_from_fd): New.
	(have_static_passphrase): New
	(get_passphrase_fd): Removed.
	(set_passphrase_fd): Removed.
	* g10.c (main): passphrase is now read here.

	* keyedit.c (keyedit_menu): "help" texts should now translate fine.

Mon Sep 21 06:40:02 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* encode.c (encode_simple): Now disables compression
	when --rfc1991 is used.
	(encode_crypt): Ditto.

Fri Sep 18 16:50:32 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* getkey.c (merge_key_and_selfsig): New.

Fri Sep 18 10:20:11 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* pkclist.c (select_algo_from_prefs): Removed 3DES kludge.

	* seskey.c (make_session_key): Fixed SERIOUS bug introduced
	by adding the weak key detection code.

	* sign.c (sign_file): Changed aremor header in certain cases.

Tue Sep 15 17:52:55 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c (check_sig_and_print): Replaced ascime by asctimestamp.

Mon Sep 14 11:40:52 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* seskey.c (make_session_key): Now detects weak keys.

	* trustdb (clear_trust_checked_flag): New.

	* plaintext.c (handle_plaintext): Does no anymore suppress CR from
	cleartext signed messages.

Sun Sep 13 12:54:29 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (insert_trust_record): Fixed a stupid bug in the free
	liunked list loops.

Sat Sep 12 15:49:16 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* status.c (remove_shmid): New.
	(init_shm_comprocess): Now sets permission to the real uid.

Wed Sep  9 11:15:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* packet.h (PKT_pubkey_enc): New flah throw_keyid, and add logic to
	implement it.
	* g10.c (main): New Option --throw-keyid

	* getkey.c (enum_secret_keys): Add new ar and changed all callers.

Tue Sep  8 20:04:09 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* delkey.c (delete_key): Moved from keyedit.c.

Mon Sep  7 16:37:52 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* build-packet.c (calc_length_header): New arg new_ctb to correctly
	calculate the length of new style packets.

	* armor.c (is_armored): Checks for symkey_enc packets.

	* pkclist.c (select_algo_from_prefs): 3DEs substitute is now CAST5.

Tue Aug 11 17:54:50 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* build-packet.c (do_secret_key): Fixed handling of old keys.

	* getkey.c (compare_name): Fixed exact and email matching

	* openfile.c (open_outfile): Changed arguments and all callers.

Tue Aug 11 09:14:35 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* encode.c (encode_simple): Applied option set-filename and comment.
	(encode_crypt): Ditto.
	* sign.c (sign_file): Ditto.
	* armor.c (armor_filter): Applied option comment.

	* encode.c (encode_crypt): Moved init_packet to the begin.
	(encode_simple): add an init_packet().

	* comment (write_comment): Now enforces a hash sign as the 1st byte.

	* import.c (import_one): Add explanation for "no user ids".

	* compress.c (do_uncompress): Applied Brian Warner's patch to support
	zlib 1.1.3 etc.

	* trustdb.c (check_trust): Fixed a problem after inserting new keys.

	* getkey (lookup): do not return the primary key if usage is given
	(lookup_sk): Ditto and take usage into account.

	* status.c (cpr_get_answer_is_yes): add display_help.

Mon Aug 10 10:11:28 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* getkey.c (lookup_sk): Now always returns the primary if arg
	primary is true.
	(lookup): Likewise.
	(get_pubkey_byname): Now returns the primary key
	(get_seckey_byname): Ditto.


Mon Aug 10 08:34:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keyid.c (pubkey_letter): ELG_E is now a small g.

Sat Aug  8 17:26:12 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* openfile (overwrite_filep): Changed semantics and all callers.

Sat Aug  8 12:17:07 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* status.c (display_help): New.

Thu Aug  6 16:30:41 1998  Werner Koch,mobil,,,	(wk@tobold)

	* seskey.c (encode_session_key): Now uses get_random_bits().

Thu Aug  6 07:34:56 1998  Werner Koch,mobil,,,	(wk@tobold)

	* ringedit.c (keyring_copy): No more backupfiles for
	secret keyrings and add additional warning in case of
	a failed secret keyring operation.

Wed Aug  5 11:54:37 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (check_opts): Moved to main.  Changed def_cipher_algo
	semantics and chnaged all users.

	* pubkey-enc.c (get_sssion_key): New informational output
	about preferences.

	* parse-packet.c (parse_symkeyenc): Fixed salted+iterated S2K
	(parse_key): Ditto.
	* build-packet.c (do_secret_key): Ditto.
	(do_symkey_enc): Ditto.

Tue Aug  4 08:59:10 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* getkey.c (enum_secret_keys): Now returns only primary keys.

	* getkey (lookup): Now sets the new namehash field.

	* parse-packet.c (parse_sig_subpkt2): New.

	* sign.c (sign_file): one-pass sigs are now emiited reverse.
	Preference data is considered when selecting the compress algo.

Wed Jul 29 12:53:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* free-packet.c (copy_signature): New.

	* keygen.c (generate_subkeypair): rewritten
	* g10.c (aKeyadd): Removed option --add-key

Mon Jul 27 10:37:28 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* seckey-cert.c (do_check): Additional check on cipher blocksize.
	(protect_secret_key): Ditto.
	* encr-data.c: Support for other blocksizes.
	* cipher.c (write_header): Ditto.

Fri Jul 24 16:47:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* kbnode.c (insert_kbnode): Changed semantics and all callers.
	* keyedit.c : More or less a complete rewrite

Wed Jul 22 17:10:04 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* build-packet.c (write_sign_packet_header): New.

Tue Jul 21 14:37:09 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* import.c (import_one): Now creates a trustdb record.

	* g10.c (main): New command --check-trustdb

Mon Jul 20 11:15:07 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* genkey.c (generate_keypair): Default key is now DSA with
	encryption only ElGamal subkey.

Thu Jul 16 10:58:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keyid.c (keyid_from_fingerprint): New.
	* getkey.c (get_pubkey_byfprint): New.

Tue Jul 14 18:09:51 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keyid.c (fingerprint_from_pk): Add argument and changed all callers.
	(fingerprint_from_sk): Ditto.

Tue Jul 14 10:10:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* plaintext.c (handle_plaintext): Now returns create error if
	the file could not be created or the user responded not to overwrite
	the file.
	* mainproc.c (proc_plaintext): Tries again if the file could not
	be created to check the signature without output.

	* misc.c (disable_core_dumps): New.
	* g10.c (main): disable coredumps for gpg

	* g10.c (MAINTAINER_OPTIONS): New to disable some options

Mon Jul 13 16:47:54 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* plaintext.c (hash_datafiles): New arg for better support of
	detached sigs. Changed all callers.
	* mainproc.c (proc_signature_packets): Ditto.

	* g10.c (main): New option "compress-sigs"
	* sig.c (sign_file): detached signatures are not anymore compressed
	unless the option --compress-sigs is used.

Thu Jul  9 19:54:54 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c: Fixes to allow zero length cleartext signatures

Thu Jul  9 14:52:47 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (build_list): Now drops setuid.
	(main): Changed the way keyrings  and algorithms are registered .

Wed Jul  8 14:17:30 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* packet.h (PKT_public_key): Add field keyid.
	* parse-packet.c (parse_key): Reset the above field.
	* keyid.c (keyid_from_pk): Use above field as cache.

	* tdbio.c, tdbio.h: New
	* trustdb.c: Moved some functions to tdbio.c.
	(print_keyid): New.

	* pkclist.c (check_signatures_trust): New.

Wed Jul  8 10:45:28 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* plaintext.c (special_md_putc): New.
	(handle_plaintext): add clearsig argument
	* mainproc.c (proc_plaintext): detection of clearsig
	* sign.c (write_dased_escaped): Changed clearsig format

Tue Jul  7 18:56:19 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (find_header): Now makes sure that there is only one
	empty line for clearsigs, as this is what OP now says.

Mon Jul  6 13:09:07 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): New option default-secret-key
	* getkey.c (get_seckey_byname): support for this option.

Mon Jul  6 09:03:49 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* getkey.c (add_keyring): Keyrings are now added to end of the
	list of keyrings.  The first added keyringwill be created.
	(add_secret_keyring): Likewise.

	* ringedit.c (add_keyblock_resource): Files are created here.

	* g10.c (aNOP): Removed

	* getkey.c (lookup): Add checking of usage for name lookups
	* packet.h (pubkey_usage): Add a field which may be used to store
	usage capabilities.
	* pkclist.c (build_pk_list): getkey now called with usage arg.
	* skclist.c (build_sk_list): Ditto.

	* sign.c (clearsign_file): Fixed "Hash:" headers

Sat Jul  4 13:33:31 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (list_ownertrust): New.
	* g10.c (aListOwnerTrust): New.

	* g10.c (def_pubkey_algo): Removed.

	* trustdb.c (verify_private_data): Removed and also the call to it.
	(sign_private_data): Removed.

Fri Jul  3 13:26:10 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (aEditKey): was aEditSig. Changed usage msg.

	* keyedit.c: Done some i18n stuff.

	* g10.c (do_not_use_RSA): New.
	* sign.c (do_sign): Add call to above function.
	* encode.c (write_pubkey_enc_from_list): Ditto.

Thu Jul  2 21:01:25 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c: Now is able sto store data of unknown
	algorithms.
	* free-packet.c: Support for this.
	* build-packet.c: Can write data of packet with unknown algos.

Thu Jul  2 11:46:36 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (parse): fixed 4 byte length header

Wed Jul  1 12:36:55 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* packet.h (new_ctb): New field for some packets
	* build-packet.c (build_packet): Support for new_ctb
	* parse-packet.c (parse): Ditto.

Mon Jun 29 12:54:45 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* packet.h: changed all "_cert" to "_key", "subcert" to "subkey".

	* free-packet.c (free_packet): Removed memory leak for subkeys.

Sun Jun 28 18:32:27 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* import.c (import_keys): Renamed from import_pubkeys.
	(import_secret_one): New.

	* g10.c (aExportSecret): New.

	* export.c (export_seckeys): New.

	* parse-packet.c (parse_certificate): Cleaned up.
	(parse_packet): Trust packets are now considered as unknown.
	(parse_pubkey_warning): New.

Fri Jun 26 10:37:35 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (has_invalid_email_chars): New.

Wed Jun 24 16:40:22 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (armor_filter): Now creates valid onepass_sig packets
	with all detected hash algorithms.
	* mainproc.c (proc_plaintext): Now uses the hash algos as specified
	in the onepass_sig packets (if there are any)

Mon Jun 22 11:54:08 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* plaintext.c (handle_plaintext): add arg to disable outout
	* mainproc.c (proc_plaintext): disable output when in sigs_only mode.

Thu Jun 18 13:17:27 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c: Removed all rsa packet stuff, chnaged defaults
	for key generation.

Sun Jun 14 21:28:31 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* misc.c (checksum_u16): Fixed a stupid bug which caused a
	wrong checksum calculation for the secret key protection and
	add a backward compatibility option.
	* g10.c (main): Add option --emulate-checksum-bug.

Thu Jun 11 13:26:44 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* packet.h: Major changes to the structure of public key material
	which is now stored in an array and not anaymore in a union of
	algorithm specific structures.	These is needed to make the system
	more extendable and makes a lot of stuff much simpler. Changed
	all over the system.

	* dsa.c, rsa.c, elg.c: Removed.

Wed Jun 10 07:22:02 1998  Werner Koch,mobil,,,	(wk@tobold)

	* g10.c ("load-extension"): New option.

Mon Jun  8 22:23:37 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* seckey-cert.c (do_check): Removed cipher constants
	(protect_secret_key): Ditto.

Fri May 29 10:00:28 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (query_trust_info): New.
	* keylist.c (list_one): Add output of trust info
	* mainproc (list_node): ditto.
	* g10.c (main): full trustdb init if -with-colons and any of the
	key list modes.

Thu May 28 10:34:42 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* status.c (STATUS_RSA_OR_IDEA): New.
	* sig-check.c (check_signature): Output special status message.
	* pubkey-enc.c (get_session_key): Ditto.

	* mainproc.c (check_sig_and_print): Changed format of output.
	* passpharse.c (passphrase_to_dek): Likewise.

Wed May 27 13:46:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (aListSecretKeys): New option --list-secret-keys
	* keylist.c (std_key_list): Renamed to public_key_list.
	(secret_key_list): New
	(list_one, list_all): Add support for secret keys.
	* getkey.c (get_secret_keyring): New.
	* mainproc.c (list_node): Add option --with-colons for secret keys

	* sig-check.c (check_key_signature): detection of selfsigs
	* mainproc.c (list_node): fixed listing.

	* g10.c (aListSecretKeys): New option --always-trust
	* pkclist.c (do_we_trust): Override per option added

	* status.c (write_status_text): Add a prefix to every output line.

Wed May 27 07:49:21 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10 (--compress-keys): New.
	* options.h (compress_keys): New.
	* export.c (export_pubkeys): Only compresses with the new option.

Tue May 26 11:24:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* passphrase.c (get_last_passphrase): New
	(set_next_passphrase): New.
	(passphrase_to_dek): add support for the above functions.
	* keyedit.c (make_keysig_packet): Add sigclass 0x18,
	changed all callers due to a new argument.
	* keygen.c (write_keybinding): New
	(generate_subkeypair): Add functionality
	(ask_algo, ask_keysize, ask_valid_days): Broke out of generate_keypair
	(ask_user_id, ask_passphrase): Ditto.

Thu May 21 11:26:13 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c,gpgd.c (main): Does now return an int, so that egcs does
	not complain.

	* armor.c (fake_packet): Removed erro message and add a noticed
	that this part should be fixed.

	* sign.c (sign_file): Compression now comes in front of encryption.
	* encode.c (encode_simple): Ditto.
	(encode_crypt): Ditto.

Tue May 19 16:18:19 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (fake_packet): Changed assertion to log_error

Sat May 16 16:02:06 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* build-packet.c (build_packet): Add SUBKEY packets.

Fri May 15 17:57:23 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sign.c (hash_for): New and used in all places here.
	* main.h (DEFAULT_): new macros.
	* g10.c  (opt.def_digest_algo): Now set to 0

	* compress.c (init_compress): Add support for algo 1
	* options.h (def_compress_algo): New
	* g10.c (main): New option --compress-algo

Fri May 15 13:23:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (print_mds): New feature to print only one hash,
	chnaged formatting.

Thu May 14 15:36:24 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* misc.c (trap_unaligned) [__alpha__]: New
	* g10.c (trap_unaligned): Add call to this to track down SIGBUS
	on Alphas (to avoid the slow emulation code).

Wed May 13 11:48:27 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* build-packet.c (do_signature): Support for v4 pakets.
	* keyedit.c (make_keysig_packet): Ditto.
	* build-packet.c (build_sig_subpkt_from_sig): New.
	(build_sig_subpkt): New.

	* elg.c (g10_elg_sign): removed keyid_from_skc.
	* dsa.c (g10_dsa_sign): Ditto.
	* rsa.c (g10_rsa_sign): Ditto.
	* keyedit.c (make_keysig_packet): Add call to keyid_from_skc

	* sign.c (clearsign_file): Support for v4 signatures.
	(sign_file): Ditto.

Wed May  6 09:31:24 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (do_parse): add support for 5 byte length leader.
	(parse_subpkt): Ditto.
	* build-packet.c (write_new_header): Ditto.

	* packet.h (SIGSUBPKT_): New constants.
	* parse-packet.c (parse_sig_subpkt): Changed name, made global,
	and arg to return packet length, chnaged all callers


Tue May  5 22:11:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (gen_dsa): New.
	* build_packet.c (do_secret_cert): Support for DSA

Mon May  4 19:01:25 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* compress.c: doubled buffer sizes
	* parse-packet.c (do_plaintext): now uses iobuf_read/write.

Mon May  4 09:35:53 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* seskey.c (encode_md_value): Add optional argument hash_algo,
	changed all callers.

	* passphrase.c (make_dek_from_passphrase): Removed
	* (get_passhrase_hash): Changed name to passphrase_to_dek, add arg,
	changed all callers.

	* all: Introduced the new ELG identifier and added support for the
	encryption only one (which is okay to use by GNUPG for signatures).

Sun May  3 17:50:26 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* packet.h (PKT_OLD_COMMENT): New name for type 16.
	* parse-packet.c (parse_comment): Now uses type 61

Fri May  1 12:44:39 1998  Werner Koch,mobil,,,	(wk@tobold)

	* packet.h (count): Chnaged s2k count from byte to u32.
	* seckey-cert.c (do_check): Changed s2k algo 3 to 4, changed
	reading of count.
	* build-packet.c (do_secret_cert): ditto.
	* parse-packet.c (parse_certificate): ditto.

	* parse-packet.c (parse_symkeyenc): New.
	* build-packet.c (do_symkey_enc): New.

Thu Apr 30 16:33:34 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sign.c (clearsign_file): Fixed "Hash: " armor line.

Tue Apr 28 14:27:42 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (parse_subpkt): Some new types.

Mon Apr 27 12:53:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Add option --skip-verify.
	* mainproc.c (check_sig_and_print): Ditto.

	* g10.c (print_mds): Add output for Tiger.

	* sign.c (sign_file): Now uses partial length headers if used
	in canonical textmode (kludge to fix a bug).

	* parse-packet.c (parse_certificate): Changed BLOWFISH id.
	* pubkey-enc.c (get_session_key): Ditto.
	* seskey.c (make_session_key): Ditto.
	* seckey-cert.c (protect_secret_key,do_check): Add BLOWFISH160.

Fri Apr 24 17:38:48 1998  Werner Koch,mobil,,,	(wk@tobold)

	* sig-check.c (check_key_signature): Add sig-class 0x14..0x17
	* keyedit.c (sign-key): Some changes to start with support of
	the above new sig-classes.

Wed Apr 22 09:01:57 1998  Werner Koch,mobil,,,	(wk@tobold)

	* getkey.c (compare_name): add email matching

Tue Apr 21 16:17:12 1998  Werner Koch,mobil,,,	(wk@tobold)

	* armor.c (armor_filter): fixed missing last LF before CSUM.

Thu Apr  9 11:35:22 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* seckey-cert.c (do_check): New; combines all the check functions
	into one.

	* sign.c: removed all key management functions
	* keyedit.c: New.

Thu Apr  9 09:49:36 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* import.c (chk_self_sigs): Changed an error message.

Wed Apr  8 16:19:39 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* packet.h: packet structs now uses structs from the pubkey,
	removed all copy operations from packet to pubkey structs.

Wed Apr  8 13:40:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (verify_own_certs): Fixed "public key not found".

	* getkey.c (key_byname): New, combines public and secret key search.

	* pkclist.c (build_pkc_list): Add new arg usage, changed all callers.
	* skclist.c (build_skc_list): Likewise.

	* ringedit.c (find_keyblock, keyring_search2): Removed.

Wed Apr  8 09:47:21 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sig-check.c (do_check): Applied small fix from Ulf Möller.

Tue Apr  7 19:28:07 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cipher.c, encr-data.c, seckey-cert.c: Now uses cipher_xxxx
	functions instead of blowfish_xxx or cast_xxx

Tue Apr  7 11:04:02 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* Makefile.am (g10maint.o): Changed the way it is created.

Mon Apr  6 11:17:08 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* misc.c: New.
	* keygen.c (checksum,checksum_u16,checksum_mpi): Moved to misc.c
	* seckey-cert.c: Kludge for wrong ELG checksum implementation.

Sat Apr  4 20:07:01 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* cipher.c (cipher_filter): Support for CAST5
	* encr-data.c (decode_filter): Ditto.
	(decrypt_data): Ditto.
	* seskey.c (make_session_key): Ditto.
	* seckey-cert.c (check_elg, check_dsa): Ditto,
	(protect_secret_key): Ditto.
	* pubkey-enc.c (get_session_key): Ditto.
	* passphrase.c (hash_passphrase): Ditto.

Thu Apr  2 20:22:35 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* gpgd.c: New

Thu Apr  2 10:38:16 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (generate_keypair): Add valid_days stuff.
	* trustdb.c (check_trust): Add check for valid_days.

Wed Apr  1 16:15:58 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (generate_keypair): Addional question whether the
	selected large keysize is really needed.

Wed Apr  1 15:56:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* seckey-cert.c (protect_secret_key): merged protect_xxx to here.

Wed Apr  1 10:34:46 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* Makefile.am (g10maint.c): Changed creation rule, so that it works
	on FreeBSD (missing CFLAGS).

	* parse-packet.c (parse_subkey): Removed.

Thu Mar 19 15:22:36 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* ringedit.c (keyring_enum): Fixed problem with reading too
	many packets. Add support to read secret keyrings.

	* getkey.c (scan_keyring): Removed
	(lookup): New to replace scan_keyring.
	(scan_secret_keyring): Removed.
	(lookup_skc): New.

Wed Mar 18 11:47:34 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* ringedit.c (enum_keyblocks): New read mode 11.

	* keyid.c (elg_fingerprint_md): New and changed all other functions
	to call this if the packet version is 4 or above.

Tue Mar 17 20:46:16 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (parse_certificate): Add listing support for subkeys.

Tue Mar 17 20:32:22 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (is_armored): Allow marker packet.

Thu Mar 12 13:36:49 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (check_trust): Checks timestamp of pubkey.
	* sig-check. (do_check): Compares timestamps.

Tue Mar 10 17:01:56 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Add call to init_signals.
	* signal.c: New.

Mon Mar  9 12:43:42 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* dsa.c: New
	* packet.h, free-packet.c, parse-packet.c : Add support for DSA
	* sig-check.c, getkey.c, keyid.c, ringedit.c: Ditto.
	* seckey-cert.c: Ditto.

	* packet.h : Moved .digest_algo of signature packets to outer
	structure. Changed all references

Sun Mar  8 13:06:42 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* openfile.c : Support for stdout filename "-".

	* mainproc.c (check_sig_and_print): Enhanced status output:
	* status.c (write_status_text): New.

Fri Mar  6 16:10:54 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* kbnode.c (clone_kbnode): Fixed private_flag.

	* mainproc.c (list_node): Output of string "Revoked" as user-id.

Fri Mar  6 14:26:39 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Add userids to "-kv" and cleaned up this stuff.

Fri Mar  6 12:45:58 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Changed semantics of the list-... commands
	and added a new one. Removed option "-d"

	* decrypt.c: New.

	* trustdb.c (init_trustdb): Autocreate directory only if it ends
	in "/.gnupg".

Thu Mar  5 12:12:11 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c (do_proc_packets): New. Common part of proc_packet.
	(proc_signature_packets): special version to handle signature data.
	* verify.c: New.
	* g10.c (aVerify): New.
	* plaintext.c (hash_datafiles): New.
	* compress.c (handle_compressed): Add callback arg, changed caller.

Thu Mar  5 10:20:06 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c: Is nom the common source for gpg and gpgm
	* g10maint.c: Removed
	* Makefile.am: Add rule to build g10maint.c

Thu Mar  5 08:43:59 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Changed the way clear text sigs are faked.

Wed Mar  4 19:47:37 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10maint.c (aMuttKeyList): New
	* keylist.c: New.

Wed Mar  4 17:20:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* getkey.c (get_pubkey_byname): Kludge to allow 0x prefix.

Tue Mar  3 13:46:55 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10maint.c (main): New option --gen-random.

Tue Mar  3 09:50:08 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (aDeleteSecretKey): New.
	(aEditSig): Add option "--edit-key" as synonym for "--edit-sig".
	(aDeleteSecretKey): New.
	* getkey.c (seckey_available): New.
	* sign.c (delete_key): Enhanced to delete secret keys, changed all
	callers.

Mon Mar  2 21:23:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* pkc_list.c (build_pkc_list): Add interactive input of user ID.

Mon Mar  2 20:54:05 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* pkclist.c (do_we_trust_pre): New.
	(add_ownertrust): Add message.
	* trustdb.c (enum_trust_web): Quick fix.

Mon Mar  2 13:50:53 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): New action aDeleteKey
	* sign.c (delete_key): New.

Sun Mar  1 16:38:58 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (do_check): No returns TRUST_UNDEFINED instead of
	eof error.

Fri Feb 27 18:14:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (find_header): Removed trailing CR on headers.

Fri Feb 27 18:02:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* ringedit.c (keyring_search) [MINGW32]: Open and close file here
	because rename does not work on open files. Chnaged callers.

Fri Feb 27 16:43:11 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sig-check.c (do_check): Add an md_enable.
	* mainproc.c (do_check_sig): Use md_open in case of detached sig
	(proc_tree): Take detached sigs into account.

Fri Feb 27 15:22:46 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): Make use of GNUPGHOME envvar.
	* g10main.c (main): Ditto.

Wed Feb 25 11:40:04 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* plaintext.c (ask_for_detached_datafile): add opt.verbose to
	info output.

	* openfile.c (open_sigfile): Try also name ending in ".asc"

Wed Feb 25 08:41:00 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* keygen.c (generate_keypair): Fixed memory overflow.

Tue Feb 24 15:51:55 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (parse_certificate): Support for S2K.
	* build-packet.c (do_secret_cert): Ditto.
	* keygen.c (gen_elg): Ditto.
	* seckey-cert.c (check_elg): Ditto
	(protect_elg): Ditto.
	* sign.c (chnage_passphrase): Ditto.
	* passphrase.c (get_passphrase_hash): Support for a salt and
	changed all callers.
	(make_dek_from_passphrase): Ditto.

Tue Feb 24 12:30:56 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* build-packet.c (hash_public_cert): Disabled debug output.

Fri Feb 20 17:22:28 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (init_trustdb) [MINGW32]: Removed 2nd mkdir arg.
	(keyring_copy) [MINGW32]: Add a remove prior to the renames.

Wed Feb 18 18:39:02 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* Makefile.am (OMIT_DEPENDENCIES): New.

	* rsa.c: Replaced log_bug by BUG.

Wed Feb 18 13:35:58 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c (do_check_sig): Now uses hash_public_cert.
	* parse-packet.c (parse_certificate): Removed hashing.
	* packet.h (public_cert): Removed hash variable.
	* free-packet.c (copy_public_cert, free_public_cert): Likewise.

	* sig-check.c (check_key_signatures): Changed semantics.

Wed Feb 18 12:11:28 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* trustdb.c (do_check): Add handling for revocation certificates.
	(build_sigrecs): Ditto.
	(check_sigs): Ditto.

Wed Feb 18 09:31:04 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (armor_filter): Add afx->hdrlines.
	* revoke.c (gen_revoke): Add comment line.
	* dearmor.c (enarmor_file): Ditto.

	* sig-check.c (check_key_signature): Add handling for class 0x20.
	* mainproc.c : Ditto.

Tue Feb 17 21:24:17 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c : Add header lines "...ARMORED FILE .."
	* dearmor.c (enarmor_file): New.
	* g10maint.c (main): New option "--enarmor"

Tue Feb 17 19:03:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c : Changed a lot, because the packets are now stored
	a simple linlked list and not anymore in a complicatd tree structure.

Tue Feb 17 10:14:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* free_packet.c (cmp_public_certs): New.
	(cmp_user_ids): New.

	* kbnode.c (clone_kbnode): New.
	(release_kbnode): Add clone support.

	* ringedit.c (find_keyblock_bypkc): New.

	* sign.c (remove_keysigs): Self signatures are now skipped,
	changed arguments and all callers.

	* import.c : Add functionality.

Tue Feb 17 09:31:40 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* options.h (homedir): New option.
	* g10.c, g10maint.c, getkey.c, keygen.c, trustdb.c (opt.homedir): New.

	* trustdb.c (init_trustdb): mkdir for hoem directory
	(sign_private_data): Renamed "sig" to "g10.sig"

Mon Feb 16 20:02:03 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* kbnode.c (commit_kbnode): New.
	(delete_kbnode): removed unused first arg. Changed all Callers.

	* ringedit.c (keyblock_resource_name): New.
	(get_keyblock_handle): NULL for filename returns default resource.

Mon Feb 16 19:38:48 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* sig-check.s (check_key_signature): Now uses the supplied
	public key to check the signature and not any more the one
	from the getkey.c
	(do_check): New.
	(check_signature): Most work moved to do_check.

Mon Feb 16 14:48:57 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (find_header): Fixed another bug.

Mon Feb 16 12:18:34 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* getkey.c (scan_keyring): Add handling of compressed keyrings.

Mon Feb 16 10:44:51 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c, g10maint.c (strusage): Rewrote.
	(build_list): New

Mon Feb 16 08:58:41 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (use_armor): New.

Sat Feb 14 14:30:57 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* mainproc.c (proc_tree): Sigclass fix.

Sat Feb 14 14:16:33 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* armor.c (armor_filter): Changed version and comment string.
	* encode.c, sign.c, keygen.c: Changed all comment packet strings.

Sat Feb 14 12:39:24 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (aGenRevoke): New command.
	* revoke.c: New.
	* sign.c (make_keysig_packet): Add support for sigclass 0x20.

Fri Feb 13 20:18:14 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* ringedit.c (enum_keyblocks, keyring_enum): New.

Fri Feb 13 19:33:40 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* export.c: Add functionality.

	* keygen.c (generate_keypair): Moved the leading comment behind the
	key packet.
	* kbnode.c (walk_kbnode): Fixed.

	* g10.c (main): listing armored keys now work.

Fri Feb 13 16:17:43 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* parse-packet.c (parse_publickey, parse_signature): Fixed calls
	to mpi_read used for ELG b.

Fri Feb 13 15:13:23 1998  Werner Koch  (wk@isil.d.shuttle.de)

	* g10.c (main): changed formatting of help output.

Thu Feb 12 22:24:42 1998  Werner Koch  (wk@frodo)

	* pubkey-enc.c (get_session_key): rewritten

